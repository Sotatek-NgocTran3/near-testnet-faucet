<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEAR Testnet faucet - nonOfficial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500&display=swap" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.8.1/dist/cdn.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/near-api-js@0.41.0/dist/near-api-js.min.js"></script>
    <script defer data-domain="near-faucet.io" src="https://plausible.io/js/plausible.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="/assets/near-testnet-faucet-logo.svg" type="image/svg+xml">
</head>

<body class="antialiased">
    <div class="h-screen flex gradient">
        <!-- left -->
        <div class="hidden relative px-10 w-1/2 md:flex md:flex-col md:justify-center md:items-end">
            <div class="absolute w-72 px-4 h-screen z-30 flex flex-col justify-center bg-slate-700 text-right text-gray-100 duration-500 linear "
                x-data="contribute" :class="open ? 'right-0': '-right-72'" @click.outside="open = false"
                x-show="$store.auth.signed">
                <h2 class="text-3xl"><span class="border-b border-b-1">Contribute</span></h2>
                <p class="leading-tight mt-3">BIG Thanks <span class="text-sm">for your interest in
                        contributing!
                        Sharing our unused
                        tokens could help other developers learn and experiment.</span></p>
                <p class="mt-3 font-bold">You account currently holds:</p>
                <p><span x-text="$store.auth.signed ? get_balance : ''"></span>Ⓝ</p>
                <!-- contribute form -->
                <form @submit.prevent="contributeToFaucet" class="flex flex-col mt-1">
                    <div class="relative">
                        <input type="text"
                            class="text-lg font-bold border border-gray-300 block w-full py-3 px-4 bg-gray-700 placeholder-gray-400 text-white text-right pr-10 focus:outline-none"
                            placeholder="200" x-model="contribute_amount" @input.debounce.300ms="validateInput"
                            required>
                        <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                            <span class="text-3xl"> Ⓝ</span>
                        </div>
                    </div>
                    <button class="bg-gray-800 py-3 px-4 uppercase border-1 hover:border-grey-100 mt-2 disabled:bg-slate-400
                            float-right" :disabled="!inputValid">Contribute</button>
                </form>
                <!-- contribute button template -->
                <template x-teleport="#contribute-button">
                    <button x-data class="bg-gray-800 px-4 py-1 text-gray-100" x-show="$store.auth.signed"
                        @click.stop="open = true">Contribute</button>
                </template>
            </div>

            <div class="w-2/3 text-right -mt-20">
                <div class="flex justify-end">
                    <a href="https://near.org/">
                        <img src="./assets/near_logo_white.svg" alt="" class="h-24">
                    </a>
                </div>
                <!-- contribution board -->
                <div class="mt-6">
                    <div class="bg-slate-800 text-white px-2 py-1">
                        <h3 class="font-bold uppercase">Most generous contributors</h3>
                    </div>
                    <ul x-data="contributionStats" class="flex flex-col items-end">
                        <template x-for="c in contributorsTopList">
                            <li class="w-fit bg-gray-100 odd:bg-gray-200 px-2 py-1">
                                <span x-text="c.accountId"></span>
                                <span><span x-text="c.amount"></span>Ⓝ</span>
                            </li>
                        </template>
                    </ul>
                </div>
                <div class="mt-4" id="contribute-button"></div>
            </div>
        </div>

        <!-- right -->
        <div class="bg-gray-100 flex flex-col md:justify-center px-6 md:px-20  md:w-1/2 h-screen z-40">
            <div class="md:hidden mb-8 mt-10">
                <a href="https://near.org/"><img src="./assets/near_logo_black.svg" alt="" class="h-16"></a>
            </div>

            <div>
                <!-- nonofficial -->
                <div>
                    <div><span class="text-2xl md:text-6xl">nonofficial</span></div>
                    <div><span class="text-xl text-gray-100 bg-slate-800 px-1 md:text-4xl">testnet</span></div>
                    <div><span class="text-2xl md:text-6xl leading-none">faucet</span></div>
                </div>

                <div class="mt-4">
                    <p class="text-lg leading-tight">
                        This faucet is a community project where you can currently request up to <b>100Ⓝ testnet Near
                            every ~30min</b>. It is run on donations so if you have any unused tokens please consider
                        sharing them with our fellow testnetters.
                    </p>
                </div>

                <div class="mt-4">
                    <div x-data x-show="!$store.auth.signed" class="flex">
                        <button @click="$store.auth.sign_in()"
                            class="bg-slate-800 py-3 px-4 font-bold text-white border-2 border-slate-800">
                            Connect with Near Testnet
                        </button>
                    </div>

                    <div x-data="faucet" class="flex xs:flex-col md:flex md:justify-between flex-wrap">
                        <div x-show="$store.auth.signed">
                            <!-- requestFunds form -->
                            <form @submit.prevent="requestFunds" class="flex">
                                <input type="text" class="border-2 border-slate-400 py-3 px-4 focus:outline-none border-r-0
                            focus:border-slate-800 disabled:text-slate-400"
                                    :class="accountExist ? '': 'border-red-400 focus:border-red-400'"
                                    x-model="receiver_id" placeholder="account.testnet"
                                    @input.debounce.500ms="checkAccountExist" :disabled="loading" required>

                                <button
                                    class="bg-slate-700 py-3 px-4 text-gray-100 uppercase border-2 border-slate-800 border-l-0 hover:bg-slate-800 disabled:bg-slate-400 disabled:border-slate-400"
                                    :disabled="loading || !accountExist">
                                    <span x-show="loading" class="animate-pulse">please wait...</span>
                                    <span x-show="!loading">request 100Ⓝ</span>
                                </button>
                            </form>
                            <!-- notifications teleport from -->
                            <template x-teleport="#notifications">
                                <div>
                                    <!-- success notification -->
                                    <div class="bg-green-600 py-3 px-4 text-white flex space-x-2"
                                        x-show="success.status" @click.outside="clearNotifications"
                                        x-transition.opacity.duration.500ms>
                                        <img src="./assets/check-circle.svg" alt="">
                                        <h5 x-text="success.message"></h5>
                                    </div>
                                    <!-- failure notification -->
                                    <div class="bg-red-400 py-3 px-4 text-white flex space-x-2" x-show="failure.status"
                                        @click.outside="clearNotifications" x-transition.opacity.duration.500ms>
                                        <img src="./assets/x-circle.svg" alt="">
                                        <h5 x-text="failure.message"></h5>
                                    </div>
                                </div>
                            </template>
                        </div>
                        <button @click="$store.auth.sign_out()" x-show="$store.auth.signed"
                            class="bg-red-300 py-1 px-2 font-bold text-xs align-end">Disconnect</button>
                    </div>

                    <!-- notifications teleport to -->
                    <div id="notifications" class="mt-2 h-10"></div>
                </div>
            </div>
            <!-- footer -->
            <div class="border-t-4 border-gray-800 mt-4 flex justify-between items-center">
                <ul class="lg:flex lg:space-x-2 mt-1">
                    <li><a href="https://near.org/" class="hover:underline">Near</a></li>
                    <li><a href="https://near.university" class="hover:underline">Near University</a></li>
                    <li><a href="https://near.chat" class="hover:underline">Discord</a></li>
                    <li><a href="https://explorer.testnet.near.org/" class="hover:underline">Testnet Explorer</a></li>
                    <li><a href="https://awesomenear.com/" class="hover:underline">AwesomeNear</a></li>
                </ul>
                <a href="https://github.com/flmel/near-testnet-faucet" c>
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="#404040">
                        <title>GitHub</title>
                        <path
                            d="M10 0a10 10 0 0 0-3.16 19.49c.5.1.68-.22.68-.48l-.01-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.9-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.9 1.52 2.34 1.08 2.91.83.1-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.94 0-1.1.39-1.99 1.03-2.69a3.6 3.6 0 0 1 .1-2.64s.84-.27 2.75 1.02a9.58 9.58 0 0 1 5 0c1.91-1.3 2.75-1.02 2.75-1.02.55 1.37.2 2.4.1 2.64.64.7 1.03 1.6 1.03 2.69 0 3.84-2.34 4.68-4.57 4.93.36.31.68.92.68 1.85l-.01 2.75c0 .26.18.58.69.48A10 10 0 0 0 10 0">
                        </path>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</body>

<script src="./scripts.js"></script>

</html>